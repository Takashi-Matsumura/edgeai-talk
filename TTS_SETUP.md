# TTS（音声読み上げ）セットアップガイド

EdgeAI Talkでは2種類のTTSエンジンを切り替えて使用できます。

## 1. Browser TTS（標準）

ブラウザ標準のWeb Speech APIを使用します。

### 特徴
- ✅ 追加セットアップ不要
- ✅ オフライン動作
- ❌ 音声品質が低い（ロボット声）
- ❌ ブラウザ依存

### 使用方法
アプリ起動後、ヘッダーの🔊ボタンをONにして、エンジン選択で「Browser」を選択。

---

## 2. VOICEVOX（推奨）

高品質な日本語音声合成エンジン。展示会デモに最適です。

### 特徴
- ✅ 自然な日本語音声
- ✅ 複数のキャラクター音声（ずんだもん、四国めたんなど）
- ✅ 無料・オープンソース
- ✅ ローカル動作（インターネット不要）
- ⚠️ Docker必須（約1.3GBのダウンロード）

### セットアップ

1. Docker Composeで起動:
```bash
docker-compose up -d voicevox
```

2. 起動確認:
```bash
curl http://localhost:50021/version
# "latest" と表示されればOK
```

3. アプリで「VOICEVOX」を選択して使用

### 音声キャラクター変更

`.env.local`の`VOICEVOX_SPEAKER_ID`を変更:

| ID | キャラクター |
|----|------------|
| 0  | 四国めたん（ノーマル） |
| 1  | 四国めたん（あまあま） |
| 2  | 四国めたん（ツンツン） |
| 3  | ずんだもん（ノーマル） |
| 8  | 春日部つむぎ（ノーマル） |
| 14 | 冥鳴ひまり（ノーマル） |

完全なリストは https://voicevox.hiroshiba.jp/ を参照。

変更後は開発サーバーを再起動してください。

---

## トラブルシューティング

### VOICEVOXが起動しない

```bash
# ログ確認
docker-compose logs voicevox

# 再起動
docker-compose restart voicevox
```

### 音声が再生されない

1. ブラウザの開発者ツール（F12）でコンソールを確認
2. エラーメッセージを確認
3. VOICEVOXサーバーが起動しているか確認:
   ```bash
   curl http://localhost:50021/version
   ```

### 音声が途切れる / 遅延が大きい

- 初回の音声生成は少し時間がかかります（0.5-1秒）
- 2回目以降は高速化されます
- MacStudioなど高性能マシンでの実行を推奨

---

## 展示会での推奨設定

展示会デモでは **VOICEVOX** を推奨します：

1. 事前にDockerコンテナを起動
   ```bash
   docker-compose up -d voicevox
   ```

2. アプリで「VOICEVOX」を選択

3. お好みのキャラクター音声に設定
   - ずんだもん: `VOICEVOX_SPEAKER_ID=3`（親しみやすい）
   - 四国めたん: `VOICEVOX_SPEAKER_ID=0`（落ち着いた声）

4. 🔊ボタンをONにして使用

音声品質が最も自然で、来場者の印象が良くなります。

## パフォーマンス

- **初回応答**: 0.5-1秒
- **音質**: 非常に自然（商用レベル）
- **メモリ使用量**: 約1-2GB
- **CPU使用率**: 推論時に一時的に上昇
